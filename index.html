<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lovely Music Idiots Awards 2025</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body { background-color: black; color: white; margin: 0; }
        @keyframes spin-slow { from { transform: translate(-50%, -50%) rotate(0deg); } to { transform: translate(-50%, -50%) rotate(360deg); } }
        .animate-spin-slow { animation: spin-slow 20s linear infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ★重要★ ここにあなたのGASアプリのURLを貼り付けてください
        const GAS_API_URL = "https://script.google.com/macros/s/AKfycbyo0ywsxhTU5Bx4-rkSkc1JjrqJanQ8nRX785UvY-n5RVHCiYoE9X3jMuReDlcGGJlA/exec"; 

        // ★公開設定 (ネタバレ防止)★
        // false: 情報を隠す（モザイク表示・クリック無効）
        // true : 情報を公開（曲名表示・再生可能）
        const IS_REVEALED = false; 

        const { useState, useEffect } = React;

        // --- アイコンコンポーネント定義 ---
        const Icons = {
          ChevronRight: ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>
          ),
          ChevronLeft: ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m15 18-6-6 6-6"/></svg>
          ),
          Disc: ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
          ),
          Music: ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
          ),
          Play: ({ size = 24, className = "", fill="none" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="5 3 19 12 5 21 5 3"/></svg>
          ),
          X: ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
          ),
          Loader2: ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>
          ),
          Lock: ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          )
        };

        const { ChevronRight, ChevronLeft, Disc, Music, Play, X, Loader2, Lock } = Icons;

        // --- ヘルパー関数 ---
        const getYouTubeId = (url) => {
             if (!url) return null;
             const match = url.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);
             return (match && match[1].length === 11) ? match[1] : null;
        };

        // --- 以下、アプリのロジック ---

        const MOCK_DATA = {
          eventTitle: "BEST MUSIC TOP3 2025",
          subTitle: "THE LOVELY MUSIC IDIOTS' AWARDS",
          introText: [
            "我々は、ただの音楽好きではない。",
            "我々は、音の探求者であり、時代の証人である。",
            "今宵、三人の『愛すべき音楽馬鹿達』が、",
            "自らの2025年を定義した音の軌跡をここに記す。",
            "2025"
          ],
          rules: [
            { title: "SELECTION", desc: "2025年に聴いた楽曲の中から、自身のベストソングトップ3を選出する。発表年は問わない。" },
            { title: "SUBMISSION", desc: "選出した楽曲は、事前に指定のGoogleフォームへ投稿する。" },
            { title: "EXPERIENCE", desc: "LINEのYouTube共有機能を用い、全員で楽曲を体験する。" }
          ],
          interludeQuote: {
            text: "WHERE WORDS FAIL, MUSIC SPEAKS.",
            author: "Hans Christian Andersen"
          },
          presenters: [] 
        };

        const YouTubeModal = ({ videoId, onClose }) => {
          if (!videoId) return null;
          return (
            <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-in fade-in duration-300">
              <div className="relative w-full max-w-4xl aspect-video bg-black border border-white/20">
                <button onClick={onClose} className="absolute -top-12 right-0 text-white flex items-center gap-2 hover:text-red-500 transition-colors">
                  <span className="text-sm">CLOSE</span> <X size={32} />
                </button>
                <iframe width="100%" height="100%" src={`https://www.youtube.com/embed/${videoId}?autoplay=1`} frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe>
              </div>
            </div>
          );
        };

        const SlideContainer = ({ children, className = "" }) => (
          <div className={`min-h-screen w-full flex flex-col items-center justify-center p-6 transition-colors duration-700 ${className}`}>{children}</div>
        );

        const NoiseBackground = () => (
          <div className="fixed inset-0 pointer-events-none opacity-[0.03] z-0 mix-blend-overlay" style={{backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}} />
        );

        const FadeIn = ({ children, delay = 0 }) => {
          const [isVisible, setIsVisible] = useState(false);
          useEffect(() => { const timer = setTimeout(() => setIsVisible(true), delay); return () => clearTimeout(timer); }, [delay]);
          return <div className={`transition-all duration-1000 transform ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}`}>{children}</div>;
        };

        const Navigation = ({ onNext, onPrev, nextLabel = "NEXT", showPrev = true, colorClass = "text-white" }) => (
          <div className={`fixed bottom-8 right-8 z-50 ${colorClass} flex items-center gap-8`}>
            {showPrev && (
              <button onClick={onPrev} className="flex items-center gap-2 hover:opacity-50 transition-opacity group">
                <ChevronLeft size={20} className="group-hover:-translate-x-1 transition-transform" />
                <span className="text-sm tracking-widest">BACK</span> 
              </button>
            )}
            <button onClick={onNext} className="flex items-center gap-2 hover:opacity-50 transition-opacity group">
              <span className="text-sm tracking-widest">{nextLabel}</span> 
              <ChevronRight size={20} className="group-hover:translate-x-1 transition-transform" />
            </button>
          </div>
        );

        const RevealGuard = ({ children, placeholder = "COMING SOON" }) => {
           if (IS_REVEALED) return children;
           return (
               <div className="relative w-full h-full flex items-center justify-center bg-black/40 backdrop-blur-md rounded border border-white/10 p-4 min-h-[100px]">
                   <div className="flex flex-col items-center text-white/50 gap-2">
                       <Lock size={24} />
                       <span className="text-sm font-bold tracking-[0.2em]">{placeholder}</span>
                   </div>
               </div>
           );
        };

        function App() {
          const [currentSlide, setCurrentSlide] = useState(0);
          const [playingVideoId, setPlayingVideoId] = useState(null);
          const [appData, setAppData] = useState(null);
          const [loading, setLoading] = useState(true);
          const totalSlides = 12;

          useEffect(() => {
            if (!GAS_API_URL || GAS_API_URL.includes("xxxx")) {
                console.log("Using Mock Data");
                setAppData(MOCK_DATA);
                setLoading(false);
                return;
            }

            fetch(GAS_API_URL)
              .then(res => res.ok ? res.json() : Promise.reject("Network response was not ok"))
              .then(data => { 
                  if(data && data.presenters && data.presenters.length > 0) {
                      setAppData(data); 
                  } else {
                      setAppData(MOCK_DATA);
                  }
                  setLoading(false); 
              })
              .catch(err => { 
                  console.error(err); 
                  setAppData(MOCK_DATA);
                  setLoading(false); 
              });
          }, []);

          const nextSlide = () => setCurrentSlide(prev => Math.min(prev + 1, totalSlides - 1));
          const prevSlide = () => setCurrentSlide(prev => Math.max(0, prev - 1));
          
          const handlePlay = (url) => {
             if (!IS_REVEALED) return;
             const id = getYouTubeId(url);
             if (id) setPlayingVideoId(id);
          };

          if (loading) return <div className="min-h-screen bg-black flex items-center justify-center text-white"><Loader2 className="animate-spin" size={48} /></div>;
          if (!appData) return <div className="min-h-screen bg-black flex items-center justify-center text-white"><div>Data Load Failed.</div></div>;

          // Slide Components
          const Opening = () => (
            <SlideContainer className="bg-black text-white text-center">
              <div className="z-10 flex flex-col items-center border-4 border-white p-12 relative">
                 <FadeIn delay={200}><div className="text-sm tracking-[0.3em] mb-4 text-gray-400">00. OPENING</div></FadeIn>
                 <FadeIn delay={600}><h1 className="text-4xl md:text-7xl font-black mb-6">BEST MUSIC<br/>TOP3 2025</h1></FadeIn>
                 <FadeIn delay={1200}><p className="text-lg tracking-widest text-gray-300">THE LOVELY MUSIC IDIOTS' AWARDS</p></FadeIn>
              </div>
              <Navigation onNext={nextSlide} onPrev={prevSlide} showPrev={false} nextLabel="START" />
            </SlideContainer>
          );
          
          const Manifesto = () => (
             <SlideContainer className="bg-white text-black items-start md:items-center">
                <div className="max-w-3xl space-y-8 z-1
